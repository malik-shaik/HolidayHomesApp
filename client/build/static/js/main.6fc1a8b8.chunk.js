(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,a,t){e.exports=t(62)},37:function(e,a,t){},39:function(e,a,t){},62:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(30),c=t.n(l),s=(t(37),t(1)),m=t.n(s),o=t(2),i=t(4),u=Object(n.createContext)(),p={isLoggedIn:!1,user:null};function d(e,a){switch(a.type){case"SET_USER":return{isLoggedIn:!0,user:a.payload};case"CLEAR_USER":return{isLoggedIn:!1,user:null};default:throw new Error}}var E=function(e){var a=Object(n.useReducer)(d,p),t=Object(i.a)(a,2),l=t[0],c=t[1],s=l.isLoggedIn,E=l.user,h=function(){var e=Object(o.a)(m.a.mark((function e(a){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.user,n=a.token,localStorage.setItem("token",n),c({type:"SET_USER",payload:t});case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("token"),c({type:"CLEAR_USER"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(u.Provider,{value:{isLoggedIn:s,user:E,setAuth:h,clearAuth:g}},e.children)},h=(t(39),t(6)),g=t(3),f=t(14),b=t(11),v=t.n(b),N=function(){var e=Object(f.a)(),a=e.register,t=e.handleSubmit,l=e.errors,c=Object(n.useState)(null),s=Object(i.a)(c,2),p=s[0],d=s[1],E=Object(g.f)(),h=Object(n.useContext)(u).setAuth,b=function(){var e=Object(o.a)(m.a.mark((function e(a){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:5050/user/register",t={headers:{"Content-Type":"application/json"}},n=JSON.stringify(a),e.next=5,v.a.post("http://localhost:5050/user/register",n,t);case 5:(r=e.sent).data.error?d(r.data.error):(h(r.data),E.push("/createhome"));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container mt-5"},r.a.createElement("div",{className:"auth-wrapper auth-inner"},r.a.createElement("h3",null,"Signup"),p&&r.a.createElement("div",{className:"err-msg"},p),r.a.createElement("form",{onSubmit:t(b)},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{className:"form-control",type:"text",name:"name",ref:a({required:"* Name must be minimum 2 charecters",minLength:3,pattern:{value:/^[a-zA-Z\s]+$/}})}),l.name&&r.a.createElement("small",{className:"err-msg"},l.name.message)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{className:"form-control",type:"text",id:"email",name:"email",ref:a({required:!0,pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i}})}),l.email&&r.a.createElement("small",{className:"err-msg"},"* Invalid email address ")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{className:"form-control",type:"password",id:"password",name:"password",ref:a({required:!0,pattern:{value:/^(?=.*\d)(?=.*[a-zA-Z]).{5,}$/}})}),l.password&&r.a.createElement("small",{className:"err-msg"},"* Minimum 5 alpha numberic charecters"," ")),r.a.createElement("button",{className:"btn btn-primary btn-form btn-block"},"Signup"))))},w=function(){var e=Object(n.useState)([]),a=Object(i.a)(e,2),t=a[0],l=a[1];return Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("http://localhost:5050/home/");case 2:a=e.sent,l(a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},t.map((function(e){return r.a.createElement("div",{className:"d-flex align-items-center shadow-lg bg-light mb-3 ",key:e._id},r.a.createElement("div",{className:"col-5"},r.a.createElement(h.b,{key:e._id,to:"/home/".concat(e._id)},r.a.createElement("img",{className:"d-block h-30 w-100 m-4",src:e.images[0].imageLink,alt:"img"}))),r.a.createElement("div",{className:"col-7 ml-5"},r.a.createElement("h3",null,e.name),r.a.createElement("p",null,"Rent: ",e.rent),r.a.createElement("p",null,"Address: ",e.address),r.a.createElement(h.b,{to:"/home/".concat(e._id)},r.a.createElement("button",{className:"btn btn-warning mt-2"},"See house"))))}))))},j=function(){var e=Object(f.a)(),a=e.register,t=e.handleSubmit,l=e.errors,c=Object(n.useState)([]),s=Object(i.a)(c,2),u=s[0],p=s[1],d=Object(n.useState)(void 0),E=Object(i.a)(d,2),h=E[0],g=E[1],b=function(e){return p(u.concat(e.target.files[0]))},N=function(){var e=Object(o.a)(m.a.mark((function e(a){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("name",a.name),t.append("rent",a.rent),t.append("address",a.address),u.map((function(e){return t.append("images",e)})),"http://localhost:5050/home/createhome",n={headers:{"Content-Type":"multipart/form-data","auth-token":localStorage.getItem("token")}},e.next=9,v.a.post("http://localhost:5050/home/createhome",t,n);case 9:r=e.sent,console.log(r.data),r.data.message&&g(r.data.message);case 12:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container mt-5"},r.a.createElement("div",{className:"auth-wrapper auth-inner"},r.a.createElement("h2",{className:"text-center mb-3"},"Create Home"),h?r.a.createElement("div",null,r.a.createElement("h4",null,h),r.a.createElement("button",{onClick:function(){return g(void 0)}},"Create new home")):r.a.createElement("form",{onSubmit:t(N)},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control mb-2",type:"text",name:"name",placeholder:"Title",ref:a({required:"* Title must be minimum 2 charecters",minLength:3,pattern:{value:/^[a-zA-Z\s]+$/}})}),l.name&&r.a.createElement("small",{className:"err-msg"},l.name.message),r.a.createElement("input",{className:"form-control mb-2",type:"text",name:"rent",placeholder:"Rent",ref:a({required:!0,minLength:3,pattern:{value:/^[0-9]*$/}})}),l.rent&&r.a.createElement("small",{className:"err-msg"},"* Rent must be minimum 3 degits."," "),r.a.createElement("input",{className:"form-control mb-2",type:"text",name:"address",placeholder:"Address",ref:a({required:!0,minLength:5})}),l.address&&r.a.createElement("small",{className:"err-msg"},"* Incorrect address. "),r.a.createElement("input",{type:"file",name:"image1",placeholder:"browse image",onChange:b,ref:a({required:!0})}),l.image&&r.a.createElement("small",{className:"err-msg"},"* Please choose image. "),r.a.createElement("input",{type:"file",name:"image2",placeholder:"browse image",onChange:b,ref:a({required:!0})}),l.image&&r.a.createElement("small",{className:"err-msg"},"* Please choose image. "),r.a.createElement("button",{className:"btn btn-warning btn-block mt-2"},"Create")))))},y=function(){var e=Object(f.a)(),a=e.register,t=e.handleSubmit,l=e.errors,c=Object(g.f)(),s=Object(n.useState)(null),p=Object(i.a)(s,2),d=p[0],E=p[1],h=Object(n.useContext)(u).setAuth,b=function(){var e=Object(o.a)(m.a.mark((function e(a){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:5050/user/login",t={headers:{"Content-Type":"application/json"}},n=JSON.stringify(a),e.next=5,v.a.post("http://localhost:5050/user/login",n,t);case 5:r=e.sent,console.log(r.status),console.log(r.data),console.log(r.data.error),r.data.error?E(r.data.error):(h(r.data),c.push("/createhome"));case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container mt-5"},r.a.createElement("div",{className:"auth-wrapper auth-inner"},r.a.createElement("form",{onSubmit:t(b)},r.a.createElement("h3",null,"Login"),d&&r.a.createElement("div",{className:"err-msg"},d),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{className:"form-control",type:"text",id:"email",name:"email",ref:a({required:!0,pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i}})}),l.email&&r.a.createElement("small",{className:"err-msg"},"* Invalid email address ")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{className:"form-control",type:"password",id:"password",name:"password",ref:a({required:!0,pattern:{value:/^(?=.*\d)(?=.*[a-zA-Z]).{5,}$/}})}),l.password&&r.a.createElement("small",{className:"err-msg"},"* Minimum 5 alpha numberic charecters"," ")),r.a.createElement("button",{className:"btn btn-primary btn-form btn-block"},"Login"))))},O=function(){var e=Object(n.useState)(void 0),a=Object(i.a)(e,2),t=a[0],l=a[1],c=Object(g.g)().id;return Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(m.a.mark((function e(){var a,t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="http://localhost:5050/home/".concat(c),e.next=3,v.a.get(a);case 3:t=e.sent,l(t.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"masthead"},r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"row h-100 align-items-center"},r.a.createElement("div",{className:"col-6 text-cente"},t?r.a.createElement("div",null,r.a.createElement("h3",{className:"font-weight-light"},t.name),r.a.createElement("div",{className:"d-flex"},t.images.map((function(e){return r.a.createElement("img",{className:"d-block w-100 mr-3",src:e.imageLink,alt:"img"})}))),r.a.createElement("p",{className:"lead"},"Rent: ",t.rent),r.a.createElement("p",{className:"lead"},"Address: ",t.address)):r.a.createElement("h2",null,"Loading...."))))))},k=function(){var e=Object(n.useContext)(u),a=e.isLoggedIn,t=e.user,l=e.clearAuth;Object(n.useEffect)((function(){localStorage.getItem("token")||l()}),[a]);return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark mb-4"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(h.b,{className:"nav-link",to:"/"},r.a.createElement("h4",{className:"logo"},"Holiday Homes")),a&&r.a.createElement("li",{className:"nav-link"},r.a.createElement("p",{className:"logo",style:{margin:"auto"}},"Welcome back, ",t.name,"!"))),r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{className:"nav-link",to:"/"},"Homes")),a?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{className:"nav-link",to:"/createhome"},"Add new home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{className:"nav-link",to:"/",onClick:function(){return l()}},"Logout"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{className:"nav-link",to:"/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{className:"nav-link",to:"/signup"},"Sign up"))))))};var x=function(){return r.a.createElement(E,null,r.a.createElement(h.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(k,null),r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/",component:w}),r.a.createElement(g.a,{exact:!0,path:"/home/:id",component:O}),r.a.createElement(g.a,{exact:!0,path:"/signup",component:N}),r.a.createElement(g.a,{exact:!0,path:"/login",component:y}),r.a.createElement(g.a,{exact:!0,path:"/createhome",component:j})))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.6fc1a8b8.chunk.js.map